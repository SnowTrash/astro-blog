---
import type { IFrontmatter } from 'astro-boilerplate-components';

import { CTA } from '@/partials/CTA';
import { Hero } from '@/partials/Hero';
import { ProjectList } from '@/partials/ProjectList';
import { RecentPosts } from '@/partials/RecentPosts';
import { Sponsors } from '@/partials/Sponsors';
import Base from '@/templates/Base.astro';
import { AppConfig } from '@/utils/AppConfig';
import { sortByDate } from '@/utils/Posts';

// Nuevo Componente LaTex
import Latex from '../components/LaTex.astro';
// Componente p5
import P5Canvas from '../components/p5/p5Canvas.vue';
// Importando Resorte
// import Resorte from '../components/Nonlinear/elResorte0.vue';
// Componente p5_flowfields
import P5FlowField from '../components/p5/p5FlowField.vue';
// nuevo componente TresJs
import TheExperience from '../components/three/TheExperience.vue';

const allPosts = await Astro.glob<IFrontmatter>('./posts/*.md');
const sortedPosts = sortByDate(allPosts);
const lastThreePosts = sortedPosts.slice(0, 3);

const { title } = AppConfig;
const { description } = AppConfig;
const { author } = AppConfig;

// Variables para mostrar en LaTex
export const f1 = '\\begin{bmatrix}a & b \\\\ c & d\\end{bmatrix}';
export const f2 = '\\overbrace{a+b+c}^{\\text{a sum of three numbers}}';
---

<Base head={{ title, description }}>
  <Hero />
  <ProjectList />
  <RecentPosts postList={lastThreePosts} />
  <Latex formula='E=mc^2' />
  <Latex formula={f1} />
  <Latex formula={f2} />
  {author === 'Snow_Tras' ? <TheExperience client:load /> : <p />}
  <!-- <Resorte client:load /> -->
  {author === 'Snow_Tras' ? <P5Canvas client:only /> : <p />}
  {author === 'Snow_Tras' ? <P5FlowField client:only /> : <p />}
  <Sponsors />
  <CTA />
</Base>
